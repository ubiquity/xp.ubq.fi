# Tech Context: Application & Data Insights

## 1. Core Application Technologies
- **Runtime & Tooling:** Bun (Package manager, runtime, script runner), esbuild (Bundler).
- **Language:** TypeScript (Main app logic).
- **Frontend:** Plain HTML & CSS (Minimalist approach).
- **Client-Side Processing:** JavaScript (`fflate` for unzipping), potentially Rust/WASM for performance-critical tasks.
- **Browser APIs:** Fetch API (Network requests), IndexedDB (Local data storage/caching).

## 2. Data Source for Insights (`rawData`)
*   **Format:** JSON object, representing processed contribution data.
*   **Origin:** Generated by systems like `ubiquity-os-marketplace/text-conversation-rewards`, which analyze GitHub activity.
*   **Structure:** Hierarchical (UserID -> Repo -> Issue/PR -> Contributor -> Details). See `docs/system-patterns.md` for the full structure.
*   **Content:** Includes contribution details (comments, tasks, reviews), metadata (timestamps, URLs), and calculated scores (XP, formatting, relevance, readability, review rewards).

## 3. Key Concepts & Processing
*   **GitHub API:** The ultimate source of the activity data processed into `rawData`.
*   **Client-Side Transformation:** The application transforms the raw `aggregated_results.json` from artifacts into the structured `rawData` format stored in IndexedDB.
*   **Data Aggregation (for Insights):** The `rawData` in IndexedDB is pre-aggregated to some extent. Generating specific manager-level insights requires further aggregation (e.g., summing XP per user, calculating averages across issues/time).
*   **Scoring Algorithms:** The validity of derived insights depends heavily on the consistency and logic of the scoring algorithms in the source system (e.g., `text-conversation-rewards`).

## 4. Visualization & Analytics Approach
- **IndexedDB-Backed:** All analytics and visualizations (developer-facing and potential manager-facing) run off data cached in IndexedDB for instant UI load and offline capability.
- **Charting:** Charts rendered using SVG/Canvas directly in TypeScript, adhering to the framework-free principle. Minimal, dependency-free libraries (e.g., uPlot, Chart.js via CDN) are considered only if necessary.
- **Framework-Free UI:** All UI components are implemented without frontend frameworks.

## 5. UI & CSS Constraints
- **Minimalism:** Absolutely minimal CSS, only for essential layout and usability.
- **No Frills:** No colors, custom fonts, or visual embellishments in the core UI.
- **Strict Units:** All spacing, sizing, and layout units must be in PX and multiples of 4px.
- **Visualization Focus:** Design and visual interest are concentrated within the data visualizations.

## 6. Development Setup
- **Installation:** `bun install`
- **Build:** `bun run build`
- **Watch Mode:** `bun run watch`
- **Dev Server:** `bun run dev:server`
- **Run All Dev Processes:** `bun run all`
- **Testing:** `bun test`

## 7. Constraints & Dependencies
*   **Application Constraints:**
    *   No frontend frameworks (React, Vue, etc.).
    *   Minimal external dependencies.
    *   Backend limited to auth proxy (Deno Deploy 50ms compute constraint).
    *   ZIP processing must occur client-side.
*   **Insight Constraints:**
    *   Insight quality depends on `rawData` availability and the accuracy/relevance of the source system's scoring logic.
    *   Processing very large `rawData` sets might require performance optimization or alternative storage/processing strategies in the future.
*   **Key Dependencies:**
    *   `fflate`: JavaScript library for client-side unzipping.
    *   `jose`: For JWT/JWE handling in the Deno Deploy auth proxy.
    *   `npm-run-all`: For running multiple Bun scripts concurrently during development.
    *   `typescript`, `esbuild`, `@types/bun`, `bun-types`: Core tooling and types.

## 8. Environment
- `.env.example` provides environment variable templates.
- Bun automatically loads `.env` files for local development.
